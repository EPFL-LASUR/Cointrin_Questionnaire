# Plots

## Load data
```{r}
here::i_am("R/plots.Rmd")
source(here::here("R/util.R"))
processed_data_folder <- "../data/processed"
raw_data_folder <- "../data/raw"
data <- haven::read_sav(
  file.path(
    processed_data_folder, "regrouped_data.sav"
  )
)

bar_plot_folder = file.path(processed_data_folder, "barplot")
cross_plot_folder = file.path(processed_data_folder, "cross")

excludedVars = c("lfdn", "timestamp", "duration", "lastpage", "browser", "ats", "cleaned", "date_of_first_mail", "date_of_last_access", "datetime", "device_type", "external_lfdn", "flash", "javascript", "language", "output_mode", "page_history", "participant_brand") # more to come
```

## Create all Barplots
```{r}
for (variableName in names(data)) {
  if (variableName %in% excludedVars) next

  create_bar_plot(data, variableName, check_labels = TRUE)
}
```

## Create all Heatmaps
```{r}
vars2 <- c("v_6_r", "v_14_r", "v_15_r", "v_293", "v_601", "v_600")
for (var1 in names(data)) {
  if (var1 %in% excludedVars || var1 %in% vars2) next
  for (var2 in vars2) {
    create_heat_map(data, var1, var2, check_labels = TRUE, percent = TRUE)
  }
}
```


```{r}
create_heat_map(data, "v_6_r", "v_14_r")
```


```{r}
create_bar_plot(data, "v_6_r", percent = TRUE)
```


```{r}
plot_on_map(data, "v_15")
```
